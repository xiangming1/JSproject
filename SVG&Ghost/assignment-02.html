<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignmenttwo</title>
    <link rel="stylesheet" href="assignment-02.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
 <script type="text/javascript">
    /*here use JQuery's fadeToggle effect to fadein and fade out the ghost body*/
    $(document).ready(function(){
     $("#bodycontrol_1").click(function(){
       $("#body").fadeToggle(1000);
    });
 
    });  
  
    /*here use a function to animate the eyeBall, make the left eyeball down*/
    /*the reference of this code comes from MyanimatedSVG.html by John Keating*/
  function eyeBallDown() {
      console.log("d"); 
    var dd=document.getElementById('eye-l-ball');
    var svgNS = "http://www.w3.org/2000/svg";
    var rotatetransform = document.createElementNS(svgNS,'animate');
    rotatetransform.setAttributeNS(null,'attributeName',"cy");
    // dd.setAttributeNS(null,'attributeType',"XML");
    rotatetransform.setAttributeNS(null,'from','40');
    rotatetransform.setAttributeNS(null,'to','50');
    rotatetransform.setAttributeNS(null,'dur','5s');
    rotatetransform.setAttributeNS(null,'repeatCount','2');
    dd.appendChild(rotatetransform);
    rotatetransform.beginElement();
} 

 /*here use a function to animate the eye shape, make the shape of the eye bigger and smaller*/
    /*the reference of this code comes from MyanimatedSVG.html by John Keating*/

function eyeShapeChange(){
    var dd=document.getElementById('eye-l-ball');
    var svgNS = "http://www.w3.org/2000/svg";
    var rotatetransform = document.createElementNS(svgNS,'animate');
    rotatetransform.setAttributeNS(null,'attributeName',"rx");
    rotatetransform.setAttributeNS(null,'values',"0;5;0");
    rotatetransform.setAttributeNS(null,'dur','10s');
    rotatetransform.setAttributeNS(null,'repeatCount','2');
    dd.appendChild(rotatetransform);
    rotatetransform.beginElement();
}
/*here use a function to rotate the ghostbody, make the body to rotate 360deg*/
    /*the reference of this code comes from MyanimatedSVG.html by John Keating*/

function bodyrotate(){
    var dd = document.getElementById('ghost');
    var svgNS = "http://www.w3.org/2000/svg";
    var rotatetransform = document.createElementNS(svgNS,'animateTransform');
    rotatetransform.setAttributeNS(null,'attributeName',"transform");
    rotatetransform.setAttributeNS(null,'type',"rotate");
    rotatetransform.setAttributeNS(null,'from','0 40 50');
    rotatetransform.setAttributeNS(null,'to','360 40 50');
    rotatetransform.setAttributeNS(null,'dur','10s');
    rotatetransform.setAttributeNS(null,'repeatCount','2');
    dd.appendChild(rotatetransform);
    rotatetransform.beginElement();
}
/*here use a function to translate the ghost  in y coordinate, make the ghost goes down */
    /*the reference of this code comes from MyanimatedSVG.html by John Keating*/

function bodytranslate(){
    var dd = document.getElementById('ghost');
    var svgNS = "http://www.w3.org/2000/svg";
    var rotatetransform = document.createElementNS(svgNS,'animateTransform');
    rotatetransform.setAttributeNS(null,'attributeName',"transform");
    rotatetransform.setAttributeNS(null,'type',"translate");
    rotatetransform.setAttributeNS(null,'from','0 0');
    rotatetransform.setAttributeNS(null,'to','0 40 ');
    rotatetransform.setAttributeNS(null,'dur','4s');
    rotatetransform.setAttributeNS(null,'fill','freeze');
    dd.appendChild(rotatetransform);
    rotatetransform.beginElement();
}
/*here use a function to skew the ghost, make the ghost skew to the left*/
    /*the reference of this code comes from MyanimatedSVG.html by John Keating*/

function bodyskewx(){
    var dd = document.getElementById('ghost');
    var svgNS = "http://www.w3.org/2000/svg";
    var rotatetransform = document.createElementNS(svgNS,'animateTransform');
    rotatetransform.setAttributeNS(null,'attributeName',"transform");
    rotatetransform.setAttributeNS(null,'type',"skewX");
    rotatetransform.setAttributeNS(null,'from','0');
    rotatetransform.setAttributeNS(null,'to','-20');
    rotatetransform.setAttributeNS(null,'dur','1s');
    rotatetransform.setAttributeNS(null,'repeatCount','2');
    rotatetransform.setAttributeNS(null,'fill','freeze');
    dd.appendChild(rotatetransform);
    rotatetransform.beginElement();
}
/*here use a function to download the SVG*/
    /*the reference of this code comes from 
    https://stackoverflow.com/questions/57798877/button-for-downloading-svg-in-javascript-html*/

function downloaSVG(){
    const svg = document.getElementById('mySVGExternal').outerHTML;
    const blob = new Blob([svg.toString()]);
    const element = document.createElement("a");
    element.download = "ghost.svg";
    element.href = window.URL.createObjectURL(blob);
    element.click();
    element.remove();
}





/*here use a function to displaytheSVG source code to the display box*/
    /*the reference of this code comes from ghostplaySVG.html by John Keating*/


function displayXML() {
    var svgObject = document.getElementById('mySVGExternal');
    var displayBox = document.getElementById('myXMLDisplay');
    displayBox.textContent = '<svg  width="400" height="480" viewBox="0 0 100 120" xmlns="http://www.w3.org/2000/svg">' + svgObject.innerHTML +
                             "</svg>";
}
    </script>
<body>
    <div class="myControlsBox column left">
        <div style="width: 480px;">
            <button class="button butLightGrey" id="bodycontrol_1">Hide&ShowBody</button>
            <button class="button butLightGrey" onclick="eyeBallDown();">EyeBallDown</button>
            <button class="button butLightGrey" onclick="eyeShapeChange();">EyeShape</button>
            <button class="button butLightGrey" onclick="bodyrotate();">BodyRotate</button>
            <button class="button butLightGrey" onclick="bodytranslate();">BodyTranslate</button>
            <button class="button butLightGrey" onclick="bodyskewx();">BodySkewx</button>
            <button class="button butLightGrey" onclick="displayXML();">DISPLAY</button>
            <button class="button butLightGrey" onclick="downloaSVG();">DOWNLOAD</button>
        </div>
    </div>

    <div class="mySVGBox column middle">
        <svg id="mySVGExternal" width="400" height="480" viewBox="0	0	100	120" xmlns="http://www.w3.org/2000/svg">
            <rect id="background" width="100" height="120" style="fill:black;	 stroke-width:1;
        stroke:black"/>
            <g id="ghost" transform="rotate(0),	translate(0,0),	scale	(1.0)">
                <path id="body" d="M	 10	 120	 A	 2.0	 5.8,	 0	 0	 1,	 90	 120" style="stroke:white;	 stroke-width:0.5;	fill:white"/>
                <g id="eyes" transform="rotate(0,50,40),	translate(0,0)">
                    <g id="eye-l" transform="rotate(0,50,40),	translate(0,0)">
                        <ellipse id="eye-l-ball" cx="45" cy="40" rx="4" ry="6" style="stroke:black;
                        fill:black;"/>
                        <rect transform="rotate(16,46,35)" x="40" y="33" width="11" height="6" fill="white" visibility="hidden"/>
                        <circle id="eye-l-pupil" cx="45" cy="44" r="0.5" style="stroke:white;	fill:white"></circle>
                        <g id="eye-l-brow">
                            <path d="M	 41	 32	 Q	 45	 27	 49	 32" stroke="black" stroke-width="0.5" fill="transparent"/>
                            <path d="M	 41	 32	 Q	 45	 26	 49	 32" stroke="black" stroke-width="0.5" fill="transparent"/>
                        </g>
                    </g>
                    <g id="eye-r" transform="rotate(0,50,40),	translate(0,0)">
                        <ellipse id="eye-r-ball" cx="55" cy="40" rx="4" ry="6" style="stroke:black;
                         fill:black"/>
                        <rect transform="rotate(-16,56,35)" x="49" y="32" width="11" height="6" fill="white" visibility="hidden"/>
                        <circle id="eye-r-pupil" cx="55" cy="44" r="0.5" style="stroke:white;	fill:white"/>
                    </g>
                    <g id="eye-r-brow">
                        <path d="M	 51	 32	 Q	 55	 27	 59	 32" stroke="black" stroke-width="0.5" fill="transparent"/>
                        <path d="M	 51	 32	 Q	 55	 26	 59	 32" stroke="black" stroke-width="0.5" fill="transparent"/>
        
                    </g>
                </g>
                <!-- mouth -->
                <g id="mouth">
                    <path d="M 40 80 Q 51 87 61 80" stroke="black" fill="transparent"/>
                </g>
            </g>
        </svg>
        <br />
    </div>

    <div id="myXMLDisplay" class="myDisplayBox column right">

    </div>
    <!-- <script src="assignment_02.js"></script> -->
</body>
</html>